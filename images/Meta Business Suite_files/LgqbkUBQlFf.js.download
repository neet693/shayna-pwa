;/*FB_PKG_DELIM*/

__d("BizKitLocalScopeSelectorQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"assetTypes"},b={defaultValue:null,kind:"LocalArgument",name:"first"},c={defaultValue:null,kind:"LocalArgument",name:"globalScopeIDs"},d={defaultValue:null,kind:"LocalArgument",name:"shouldShowBadging"},e={defaultValue:null,kind:"LocalArgument",name:"shouldShowIGPicture"},f={defaultValue:null,kind:"LocalArgument",name:"tool"},g=[{kind:"Literal",name:"filters",value:{scope_types:["BUSINESS","PERSONAL"]}},{kind:"Literal",name:"order_by",value:["BPN_LAST_VISITED_TIME_DESC"]},{kind:"Variable",name:"scope_ids",variableName:"globalScopeIDs"}],h=[{kind:"Variable",name:"asset_types",variableName:"assetTypes"}],i={alias:null,args:null,kind:"ScalarField",name:"asset_type",storageKey:null},j=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"order_by",value:["NAME_ASC","ID_DESC"]},{kind:"Literal",name:"page_filters",value:{has_page_permission_actions:["BASIC_ADMIN"],include_profile_plus_delegate_pages:!0}}],k={alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:[{kind:"Literal",name:"height",value:30},{kind:"Literal",name:"width",value:30}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:"profile_picture(height:30,width:30)"},o={condition:"shouldShowIGPicture",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:[{alias:"instagramEnt",args:null,concreteType:"InstagramUserV2",kind:"LinkedField",name:"ent",plural:!1,selections:[m,l,n],storageKey:null}],type:"BusinessScopingInstagramAccountV2LocalScope",abstractKey:null}]},p={alias:null,args:[{kind:"Variable",name:"tool",variableName:"tool"}],kind:"ScalarField",name:"can_viewer_use_tool_in_bizkit",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"is_hidden_page_for_ig_in_fbs",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"ig_user_id_do_not_use",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f],kind:"Fragment",metadata:null,name:"BizKitLocalScopeSelectorQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessScoping",kind:"LinkedField",name:"business_scoping",plural:!1,selections:[{alias:null,args:g,concreteType:"BusinessScopingGlobalScopesConnection",kind:"LinkedField",name:"global_scopes",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:h,concreteType:"BusinessLocalScopeEntityList",kind:"LinkedField",name:"asset_lists",plural:!0,selections:[i,{alias:null,args:j,concreteType:"BusinessLocalScopeEntityListObjectsConnection",kind:"LinkedField",name:"objects",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{condition:"shouldShowBadging",kind:"Condition",passingValue:!0,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope"}]}]},k,l,o,{kind:"InlineFragment",selections:[{alias:"pageEnt",args:null,concreteType:"Page",kind:"LinkedField",name:"ent",plural:!1,selections:[p,m,l,n,q,{alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"business_presence_linked_bizlink_instagram",plural:!1,selections:[r,{args:null,kind:"FragmentSpread",name:"BizLinkInstagramNameRelay_igUser"},n],storageKey:null}],storageKey:null}],storageKey:null}],type:"BusinessScopingPageLocalScope",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a,f,d,e,b],kind:"Operation",name:"BizKitLocalScopeSelectorQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"BusinessScoping",kind:"LinkedField",name:"business_scoping",plural:!1,selections:[{alias:null,args:g,concreteType:"BusinessScopingGlobalScopesConnection",kind:"LinkedField",name:"global_scopes",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:h,concreteType:"BusinessLocalScopeEntityList",kind:"LinkedField",name:"asset_lists",plural:!0,selections:[i,{alias:null,args:j,concreteType:"BusinessLocalScopeEntityListObjectsConnection",kind:"LinkedField",name:"objects",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{condition:"shouldShowBadging",kind:"Condition",passingValue:!0,selections:[{"if":null,kind:"Defer",label:"BizKitLocalScopeSelectorQuery$defer$BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope",selections:[{kind:"TypeDiscriminator",abstractKey:"__isBusinessScopingLocalScope"},{kind:"InlineFragment",selections:[{alias:"pageEnt",args:null,concreteType:"Page",kind:"LinkedField",name:"ent",plural:!1,selections:[m,{alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"updates_count",storageKey:null},m],storageKey:null}],storageKey:null}],type:"BusinessScopingPageLocalScope",abstractKey:null}]}]},k,l,o,{kind:"InlineFragment",selections:[{alias:"pageEnt",args:null,concreteType:"Page",kind:"LinkedField",name:"ent",plural:!1,selections:[p,m,l,n,q,{alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"business_presence_linked_bizlink_instagram",plural:!1,selections:[s,r,{kind:"TypeDiscriminator",abstractKey:"__isXFBBizLinkIGUser"},l,n,{kind:"InlineFragment",selections:[m],type:"Node",abstractKey:"__isNode"}],storageKey:null},m],storageKey:null}],storageKey:null}],type:"BusinessScopingPageLocalScope",abstractKey:null}],storageKey:null}],storageKey:null},m],storageKey:null},m],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"6884682134899624",metadata:{},name:"BizKitLocalScopeSelectorQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope",selections:[{kind:"InlineFragment",selections:[{alias:"pageEnt",args:null,concreteType:"Page",kind:"LinkedField",name:"ent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"BusinessPresenceNode",kind:"LinkedField",name:"business_presence_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"updates_count",storageKey:null}],storageKey:null}],storageKey:null}],type:"BusinessScopingPageLocalScope",abstractKey:null}],type:"BusinessScopingLocalScope",abstractKey:"__isBusinessScopingLocalScope"};e.exports=a}),null);
__d("BizLinkInstagramNameRelay_igUser.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BizLinkInstagramNameRelay_igUser",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"XFBBizLinkIGUser",abstractKey:"__isXFBBizLinkIGUser"};e.exports=a}),null);
__d("BizKitLocalScopeSelectorContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({tool:null});g["default"]=b}),98);
__d("BizKitLocalScopeSelectorGenericAssetListUtils",["ix","BizKitConstants","BizKitScopingLoggingUtils","BizKitScopingStrings","BusinessUnifiedScopingLocalSelectorUtils","GeoMediaItem.react","GeoMediaItemGroup.react","GeoSelectorItem.react","Image.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){var b=null,e=null;switch(a){case"AD_ACCOUNT":b=i.jsx(c("Image.react"),{src:h("1404871")});e=d("BizKitScopingStrings").LOCAL_SELECTOR_AD_ACCOUNT_DESCRIPTION;break;default:}return{media:b,descriptionPrefix:e}}function a(a,b,e,f){if(b==null){c("recoverableViolation")("asset type is null when render the generic asset list.",d("BizKitConstants").BIZKIT_PROJECT_NAME);return null}var g=new Map();a==null?void 0:a.forEach(function(a){a=a.asset_id;a!=null&&b!=null&&g.set(a,{id:a,type:b})});var h=j(b),k=h.media,l=h.descriptionPrefix,m=function(a){window.setTimeout(function(){var h=g.get(a);if(h==null){c("recoverableViolation")("asserinfo is null when setting the selected assetID in context.",d("BizKitConstants").BIZKIT_PROJECT_NAME);return}d("BizKitScopingLoggingUtils").logLocalScopeSelectorClick({localScopeIdTo:a,localScopeTypeTo:d("BusinessUnifiedScopingLocalSelectorUtils").convertAssetEnumToType(b),globalScopeIdTo:e.id,globalScopeTypeTo:e.type});f([h])},0)};return a==null?void 0:a.map(function(a){var b=k&&i.jsx(c("GeoMediaItemGroup.react"),{ratio:"square",children:i.jsx(c("GeoMediaItem.react"),{fit:"cover",media:k,ratio:"square"})});return i.jsx(c("GeoSelectorItem.react"),{onSelected:m,media:b,description:d("BizKitScopingStrings").getLocalScopeSelectorAssetDescription(l,a.asset_id),label:(b=a.name)!=null?b:"",value:a.asset_id},a.asset_id)})}g.getGenericAssetList=a}),98);
__d("BizLinkInstagramNameRelay",["BizLinkInstagramNameRelay_igUser.graphql","BizLinkInstagramUIIStringBuilder","RelayHooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("RelayHooks").useFragment(h!==void 0?h:h=b("BizLinkInstagramNameRelay_igUser.graphql"),a.bizLinkInstagramNameRelay);a=(a=a==null?void 0:a.name)!=null?a:"";return new(d("BizLinkInstagramUIIStringBuilder").BizLinkInstagramUIIStringBuilder)(a)}g.BizLinkInstagramNameRelayBuilder=d("BizLinkInstagramUIIStringBuilder").BizLinkInstagramUIIStringBuilder;g.useBizLinkInstagramNameBuilder=a}),98);
__d("getPageInfoMap",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=new Map();a.forEach(function(a){if(a.id!=null){var c;b.set(a.id,{instagramID:a==null?void 0:(c=a.business_presence_node)==null?void 0:(c=c.business_presence_linked_bizlink_instagram)==null?void 0:c.ig_user_id_do_not_use,pageID:a.id})}});return b}f.getPageInfoMap=a}),66);
__d("BizKitLocalScopeSelectorPageListUtils",["BizKitConfigDynamicFields","BizKitConstants","BizKitScopingLoggingUtils","BizKitScopingStrings","BizLinkInstagramNameRelay","GeoBadge.react","GeoMediaItem.react","GeoMediaItemGroup.react","GeoSelectorHeader.react","GeoSelectorItem.react","Image.react","emptyFunction","getLocalScopeItemKeyWithGlobalScope","getPageEnts","getPageInfoMap","getShouldShowConsistentNavItems.entrypointutils","getUpdatesLabel","gkx","localScopeItemKeyToIDs","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={media:{marginEnd:"x1emribx",$$css:!0}};function j(a){var b;b=(b=a.profile_picture)==null?void 0:b.uri;a=(a=a.business_presence_node)==null?void 0:(a=a.business_presence_linked_bizlink_instagram)==null?void 0:(a=a.profile_picture)==null?void 0:a.uri;return h.jsxs(c("GeoMediaItemGroup.react"),{ratio:"circle",xstyle:i.media,children:[h.jsx(c("GeoMediaItem.react"),{fit:"cover",media:h.jsx(c("Image.react"),{src:b}),platform:"facebook"}),a!=null?h.jsx(c("GeoMediaItem.react"),{fit:"cover",media:h.jsx(c("Image.react"),{src:a}),platform:"instagram"}):null]})}j.displayName=j.name+" [from "+f.id+"]";function k(a){a=(a=a.business_presence_node)==null?void 0:(a=a.business_presence_linked_bizlink_instagram)==null?void 0:(a=a.profile_picture)==null?void 0:a.uri;return h.jsx(c("GeoMediaItemGroup.react"),{ratio:"circle",xstyle:i.media,children:h.jsx(c("GeoMediaItem.react"),{fit:"cover",media:h.jsx(c("Image.react"),{src:a}),platform:"instagram"})})}k.displayName=k.name+" [from "+f.id+"]";function l(a){a=d("BizLinkInstagramNameRelay").useBizLinkInstagramNameBuilder({bizLinkInstagramNameRelay:a});var b=a.check(function(a){return a!=null&&a!==""});return b?a.build().asFbtParam():""}function m(a,b,e,f,g,i,m,n){var o=function(a){var b=m?d("localScopeItemKeyToIDs").localScopeItemKeyToIDs(a)[1]:a,h=e.get(b);if(h==null){c("recoverableViolation")("pageInfo should not be null.",d("BizKitConstants").BIZKIT_PROJECT_NAME);return}var j=m?n.get(a):g;if(j==null){c("recoverableViolation")("globalScope should not be null.",d("BizKitConstants").BIZKIT_PROJECT_NAME);return}var k=[{id:h.pageID,type:"PAGE"}];h.instagramID!=null&&k.push({id:h.instagramID,type:"INSTAGRAM_ACCOUNT_V2"});d("BizKitScopingLoggingUtils").logLocalScopeSelectorClick({localScopeIdTo:b,localScopeTypeTo:"page",globalScopeIdTo:j.id,globalScopeTypeTo:j.type});window.setTimeout(function(){if(c("gkx")("708253"))return;m&&i({id:j.id,type:j.type});f({assets:k,globalScope:j})},0)};return a.map(function(a){var e,f,i,n;if(a==null||a.id==null)return;e=(e=b.get(a.id))!=null?e:0;f=m?d("getLocalScopeItemKeyWithGlobalScope").getLocalScopeItemKeyWithGlobalScope(g.id,(f=a.id)!=null?f:""):a.id;var p=a.is_hidden_page_for_ig_in_fbs==null||a.is_hidden_page_for_ig_in_fbs;return p?h.jsx(c("GeoSelectorItem.react"),{"data-testid":void 0,badge:d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems()&&e>0?h.jsx(c("GeoBadge.react"),{label:c("getUpdatesLabel")(e),max:d("BizKitConstants").BIZKIT_UPDATES_COUNT_MAX,status:"notification",value:e}):null,label:d("BizKitConfigDynamicFields").is_ig_login?l((p=a.business_presence_node)==null?void 0:p.business_presence_linked_bizlink_instagram):"",media:k(a),onSelected:o,value:f},f):h.jsx(c("GeoSelectorItem.react"),{"data-testid":void 0,badge:d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems()&&e>0?h.jsx(c("GeoBadge.react"),{label:c("getUpdatesLabel")(e),max:d("BizKitConstants").BIZKIT_UPDATES_COUNT_MAX,status:"notification",value:e}):null,label:(p=a.name)!=null?p:"",media:j(a),onSelected:o,value:f},f)})}function n(a){var b=[];b.push(h.jsx(c("GeoSelectorHeader.react"),{label:d("BizKitScopingStrings").LOCAL_SELECTOR_ACCESS_NEEDED_LABEL}));a.map(function(a){var d;if(a==null||a.id==null)return;b.push(h.jsx(c("GeoSelectorItem.react"),{"data-testid":void 0,isDisabled:!0,label:(d=a.name)!=null?d:"",media:j(a),value:a.id},a.id))});return b}function a(a,b,d,e,f){return o(a,b,d,e,f,c("emptyFunction"),!1,new Map())}function o(a,b,c,e,f,g,h,i){a=d("getPageEnts").getPageEnts(a,function(a){return a.pageEnt});var j=d("getPageInfoMap").getPageInfoMap(a),k=a.filter(function(a){return Boolean(a==null?void 0:a.can_viewer_use_tool_in_bizkit)}),l=a.filter(function(a){return!Boolean(a==null?void 0:a.can_viewer_use_tool_in_bizkit)});k.forEach(function(a,c){d("BizKitScopingLoggingUtils").logValidLocalSelectorItemImpression(String(c),a.id,((c=a.business_presence_node)==null?void 0:c.business_presence_linked_bizlink_instagram)!=null,b)});l.forEach(function(a,c){d("BizKitScopingLoggingUtils").logInValidLocalSelectorItemImpression(String(c),a.id,((c=a.business_presence_node)==null?void 0:c.business_presence_linked_bizlink_instagram)!=null,b)});var o=[];if(d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems())return o.concat(m(a,e,j,f,c,g,h,i));o=o.concat(m(k,e,j,f,c,g,h,i));l.length>0&&(o=o.concat(n(l)));return o}g.getPageAssetList=a}),98);
__d("BizKitPageLocalScopeBadgingUpdater.react",["BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope.graphql","RelayHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useEffect;function a(a){var c=a.pageLocalScopes,e=a.setPageBadgingMap,f=d("RelayHooks").useFragment(h!==void 0?h:h=b("BizKitPageLocalScopeBadgingUpdater_BusinessScopingLocalScope.graphql"),c);i(function(){var a=new Map();f==null?void 0:f.forEach(function(b){var c;b=b==null?void 0:b.pageEnt;c=(c=b==null?void 0:(c=b.business_presence_node)==null?void 0:c.updates_count)!=null?c:0;(b==null?void 0:b.id)!=null&&a.set(b.id,c)});e(a)},[f,e]);return null}g["default"]=a}),98);
__d("useBusinessScopingFetchKey",["CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useState;function a(){var a=h(0),b=a[0],c=a[1];d("CometRelay").useSubscribeToInvalidationState(["client:root:viewer:business_scoping"],function(){c(b+1)});return b}g["default"]=a}),98);
__d("BizKitLocalScopeSelector.react",["BizKitConstants","BizKitErrorBoundary.react","BizKitLocalScopeSelectorContext","BizKitLocalScopeSelectorGenericAssetListUtils","BizKitLocalScopeSelectorPageInfoMapContext","BizKitLocalScopeSelectorPageListUtils","BizKitLocalScopeSelectorQuery.graphql","BizKitMultiAssetSelectionGating.entrypointutils","BizKitPageLocalScopeBadgingUpdater.react","BizKitRelayEnvironmentFactory","BizKitScopingLoggingUtils","BusinessScopingGating.entrypointutils","CometHeroInteractionIDContext","CometPlaceholder.react","CurrentUser","GeoSelector.react","HeroInteractionIgnoreWithDiv.react","RelayHooks","TofuAccountSelector.react","XBizSuiteControllerRouteBuilder","filterNulls","getAssetTypeEnums.entrypointutils","getIsInMoreAssetTypesProject.entrypointutils","getPageEnts","getPageInfoMap","getShouldShowConsistentNavItems.entrypointutils","localScopeItemKeyToIDs","react","recoverableViolation","unrecoverableViolation","useBizKitBaseLoggingData","useBizKitSelectedAssets","useBizKitSelectedAssetsLogging","useBizWebCurrentRouteName","useBizWebRouteDispatcher","useBusinessScopingFetchKey","useGlobalScope"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useContext,k=e.useMemo,l=e.useState,m=h!==void 0?h:h=b("BizKitLocalScopeSelectorQuery.graphql");function n(a){var b=a.assetTypes,e=a.selectedID;a=l(new Map());var f=a[0];a=a[1];b=q(b,e);var g=b.baseLoggingData,h=b.currentGlobalScope,m=b.setSelectedLinkedAsset,n=b.setAssets,o=b.tool,p=b.data,r=b.onSelectorOpened;b=b.shouldShowPageAssetBadging;p=(p=p.viewer)==null?void 0:(p=p.business_scoping)==null?void 0:(p=p.global_scopes)==null?void 0:p.nodes[0];var t=p==null?void 0:p.asset_lists;p=t==null?void 0:(p=t.find(function(a){return a.asset_type==="PAGE"}))==null?void 0:(p=p.objects)==null?void 0:p.nodes;var u=c("useBizWebCurrentRouteName")();p=d("getPageEnts").getPageEnts(p,function(a){return a.pageEnt});p=d("getPageInfoMap").getPageInfoMap(p);var v=k(function(){return t==null?null:c("filterNulls")(t.map(function(a){var b=a.asset_type;a=(a=a.objects)==null?void 0:a.nodes;d("BusinessScopingGating.entrypointutils").getCanSeeBusinessScoping()&&a!=null&&u==="INSIGHTS"&&(a=a.filter(function(a){return a.asset_id===e}));if(b==null){c("recoverableViolation")("asset type is null when rendering the asset list with assetType",d("BizKitConstants").BIZKIT_PROJECT_NAME);return null}return b==="PAGE"?d("BizKitLocalScopeSelectorPageListUtils").getPageAssetList(a,g,h,f,m):d("getIsInMoreAssetTypesProject.entrypointutils").getIsInMoreAssetTypesProject()?d("BizKitLocalScopeSelectorGenericAssetListUtils").getGenericAssetList(a,b,h,n):null}))},[t,g,h,f,u,e,n,m]),w=j(c("CometHeroInteractionIDContext"));if(t!=null&&t.length>0){d("BizKitScopingLoggingUtils").logAssetCount(w,(w=t[0].objects)==null?void 0:w.nodes)}w=k(function(){var a;return t==null?void 0:(a=t.find(function(a){return a.asset_type==="PAGE"}))==null?void 0:(a=a.objects)==null?void 0:a.nodes},[t]);o=s(o,!1);var x=u==="INSIGHTS"&&c("TofuAccountSelector.react")!=null?c("TofuAccountSelector.react"):c("GeoSelector.react");if(v==null){c("recoverableViolation")("no asset list is rendered in local scope selector",d("BizKitConstants").BIZKIT_PROJECT_NAME);return null}return i.jsxs(i.Fragment,{children:[i.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:i.jsx(c("BizKitErrorBoundary.react"),{fallback:null,children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:b&&i.jsx(c("BizKitPageLocalScopeBadgingUpdater.react"),{pageLocalScopes:w,setPageBadgingMap:a})})})}),i.jsx(c("BizKitLocalScopeSelectorPageInfoMapContext").Provider,{value:p,children:i.jsx(x,{label:"LocalScopeSelectorAssetList","data-button-testid":"LocalScopeSelectorAssetList-"+e,isLabelHidden:!0,onClose:d("BizKitScopingLoggingUtils").logLocalScopeSelectorClose,onOpen:r,onChange:o,value:e,children:v})})]})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=c("useBizWebCurrentRouteName")();b={tool:b};a=i.jsx(n,babelHelpers["extends"]({},a));return d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems()?i.jsx(d("RelayHooks").RelayEnvironmentProvider,{environment:c("BizKitRelayEnvironmentFactory").getForActorID(c("CurrentUser").getAccountID()),children:i.jsx(c("BizKitLocalScopeSelectorContext").Provider,{value:b,children:a})}):i.jsx(c("BizKitLocalScopeSelectorContext").Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function o(a,b,e,f){var g=c("useBusinessScopingFetchKey")();return d("RelayHooks").useLazyLoadQuery(m,{globalScopeIDs:[b.id],assetTypes:e,tool:a,shouldShowBadging:d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems(),shouldShowIGPicture:!1},{fetchKey:String(g)+String(f),fetchPolicy:"store-and-network"})}function p(a){if(!d("getIsInMoreAssetTypesProject.entrypointutils").getIsInMoreAssetTypesProject()&&a.length!==1)throw c("unrecoverableViolation")("currently BizWeb local scope selector only support one asset type.",d("BizKitConstants").BIZKIT_PROJECT_NAME)}function q(a,b){a=d("getAssetTypeEnums.entrypointutils").getAssetTypeEnums(a);var e=c("useBizWebCurrentRouteName")();p(a);var f=c("useBizKitBaseLoggingData")(),g=c("useGlobalScope")(),h=c("useBizKitSelectedAssets")(),i=h.setSelectedLinkedAsset,j=h.setAssets;h=h.assetType;d("BizKitScopingLoggingUtils").logInitLocalScope(b,h);b=r(a);h=b.shouldShowPageAssetBadging;var k=b.pageBadgingFetchKey;b=b.onSelectorOpened;a=o(e,g,a,k);return{baseLoggingData:f,currentGlobalScope:g,setSelectedLinkedAsset:i,setAssets:j,tool:e,data:a,onSelectorOpened:b,shouldShowPageAssetBadging:h}}function r(a){var b=l(0),c=b[0],e=b[1],f=d("getShouldShowConsistentNavItems.entrypointutils").getShouldShowConsistentNavItems()&&a.includes("PAGE");b=function(){f&&e(c+1),d("BizKitScopingLoggingUtils").logLocalScopeSelectorOpen()};return{shouldShowPageAssetBadging:f,pageBadgingFetchKey:c,onSelectorOpened:b}}function s(a,b,e){var f=c("useBizWebRouteDispatcher")(),g=c("useGlobalScope")(),h=(g==null?void 0:g.type)==="BUSINESS"?g==null?void 0:g.id:void 0,i=d("useBizKitSelectedAssetsLogging").useBizKitSelectedAssetsLogging();return k(function(){return function(g){var j;if(a==null)return;var k=g;j=(j={},j.business_id=d("BizKitMultiAssetSelectionGating.entrypointutils").getCanSelectMultipleAssetsInSelector()?void 0:h,j);if(b){var l=d("localScopeItemKeyToIDs").localScopeItemKeyToIDs(g);l[0];l=l[1];k=l;if(e==null)throw c("unrecoverableViolation")("pageToBusinessMap should not be null when showAllAccount is true",d("BizKitConstants").BIZKIT_PROJECT_NAME);l=e.get(g);if((l==null?void 0:l.type)==="BUSINESS"&&(l==null?void 0:l.id)==null)throw c("unrecoverableViolation")("The business scope should has an ID.",d("BizKitConstants").BIZKIT_PROJECT_NAME);j=(g={},g.business_id=!d("BizKitMultiAssetSelectionGating.entrypointutils").getCanSelectMultipleAssetsInSelector()&&(l==null?void 0:l.type)==="BUSINESS"?l==null?void 0:l.id:void 0,g)}g=babelHelpers["extends"]((l={},l.asset_id=d("BizKitMultiAssetSelectionGating.entrypointutils").getCanSelectMultipleAssetsInSelector()?void 0:k,l),j);d("BizKitMultiAssetSelectionGating.entrypointutils").getCanSelectMultipleAssetsInSelector()&&i([{asset_id:k,asset_type:"PAGE"}],!1);l=c("XBizSuiteControllerRouteBuilder").buildURL({rest:a.toLowerCase()});f(l,g)}},[h,f,e,i,b,a])}g["default"]=a}),98);